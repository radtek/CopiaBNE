@model AdminLTE_Application.CRM_Vendedor

@{
    ViewBag.Title = "CRM Detalhes Empresa";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<aside class="right-side">
    <!-- Content Header (Page header) -->
    <section class="content-header">
        <h1>
            Painel Vendedor
            <small>Detalhes</small>
        </h1>
        <ol class="breadcrumb">
            <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
            <li class="active"><a href="#">Lista de Vendedores</a></li>
            <li class="active">Detalhes Vendedor</li>
        </ol>
    </section>
    <!-- Main content -->
    <section class="content">

        <div>
           
            <section class="col-lg-5 connectedSortable ui-sortable">

                <!--Informações basicas-->
                <div class="box box-solid box-group box-info">
                    <div class="box-header">
                        <i class="fa fa-info-circle"></i>
                        <h3 class="box-title">Dados</h3>
                        <div class="box-tools pull-right">
                            <button class="btn btn-default btn-sm" data-widget="collapse"><i class="fa fa-minus"></i></button>
                            <button class="btn btn-default btn-sm" data-widget="remove"><i class="fa fa-times"></i></button>
                        </div>
                    </div>
                    <div class="panel box box-primary">
                        <div class="box-footer no-border">
                            <div class="row">
                                <div class="box-header">
                                    <div class="box-body">
                                        <h4 class="box-title">@Html.DisplayFor(model => model.Nme_Vendedor)</h4><br><br><br>
                                        <b>CPF:</b> @Html.DisplayFor(model => model.Num_CPF)<br>
                                        <b>Tipo Vendedor:</b> @Html.DisplayFor(model => model.CRM_Tipo_Vendedor.Des_Tipo_Vendedor)<br>
                                        <b>Data Ultima distribuição:</b> @Html.DisplayFor(model => model.Dta_Ultima_Distribuicao_Empresa)<br>
                                        <b>Efetua atendimento:</b> @Html.DisplayFor(model => model.Flg_Efetua_Atendimento)
                                    </div>
                                </div>
                            </div><!-- /.row -->
                        </div><!-- /.box-footer -->
                    </div>
                </div><!-- /.box -->
                
                <!-- Indicadores box -->
                <div class="box box-success box-group ">
                        <div class="box-header">
                            <i class="fa fa-pie-chart"></i>
                            <h3 class="box-title">Indicadores</h3>
                            <div class="box-tools pull-right">
                                <button class="btn btn-default btn-sm" data-widget="collapse"><i class="fa fa-minus"></i></button>
                                <button class="btn btn-default btn-sm" data-widget="remove"><i class="fa fa-times"></i></button>
                            </div>
                        </div>
                        <div id="crm" class="box-footer no-border chat">
                            <div class="box-footer no-border">
                                <div class="row">
                                    <div class="col-xs-6 text-center" style="border-right: 1px solid #f4f4f4">
                                        <div id="qtdcomplano" class="knob-label"><b>@Html.ActionLink("Com plano", "../EmpresaComPlano/")</b></div>
                                        <div class="chart" id="plano-chart" style="height: 200px; position: relative;"></div>
                                    </div>
                                    <div class="col-xs-6 text-center" style="border-right: 1px solid #f4f4f4">
                                        <div id="qtdsemplano" class="knob-label"><b>@Html.ActionLink("Sem plano", "../EmpresaSemPlano/")</b></div>
                                        <div class="chart" id="semplano-chart" style="height: 200px; position: relative;"></div>
                                    </div>
                                </div>
                            </div><!-- /.box-footer -->
                        </div><!-- /.chat -->
                  </div><!-- /.box -->  
               
                <!-- Ranking Vendas-->
                <div class="box box-primary">
                    <div class="box-header">
                        <i class="fa fa-bar-chart-o"></i>
                        <h3 class="box-title">Histórico de vendas</h3>
                        <div class="box-tools pull-right">
                            <button class="btn btn-default btn-sm" data-widget="collapse"><i class="fa fa-minus"></i></button>
                            <button class="btn btn-default btn-sm" data-widget="remove"><i class="fa fa-times"></i></button>
                        </div>
                    </div>
                    <div class="box-body">
                        <div id="Historico-Vendas" style="height: 300px;"></div>
                    </div><!-- /.box-body-->
                </div>


         

            </section><!-- /.Left col -->
            <section class="col-lg-7 connectedSortable ui-sortable">

                <!-- Ranking Vendas Valor-->
                <div class="box box-primary">
                    <div class="box-header">
                        <i class="fa fa-trophy"></i>
                        <h3 class="box-title">Ranking vendas por valor</h3>
                        <div class="box-tools pull-right">
                            <button class="btn btn-default btn-sm" data-widget="collapse"><i class="fa fa-minus"></i></button>
                            <button class="btn btn-default btn-sm" data-widget="remove"><i class="fa fa-times"></i></button>
                        </div>
                    </div>
                    <div class="box-body">
                        <div id="Ranking-Vendas" style="height: 300px;"></div>
                    </div><!-- /.box-body-->
                </div>

               
                
                <!-- Vendas-->
                <div class="box box-success">
                        <div class="box-header">
                            <i class="fa fa-bar-chart-o"></i>
                            <h3 class="box-title">@Html.ActionLink("Resumo de vendas ultimos 30 dias", "Details", new { controller = "Vendas", Id = Model.Num_CPF })</h3>
                            <div class="box-tools pull-right">
                                <button class="btn btn-default btn-sm" data-widget="collapse"><i class="fa fa-minus"></i></button>
                                <button class="btn btn-default btn-sm" data-widget="remove"><i class="fa fa-times"></i></button>
                            </div>
                        </div>
                        <div class="panel">
                            <div class="box-footer no-border">
                                <div class="row">
                                    <div class="box-header">
                                        <div class="box-body">
                                            <div class="box-body chart-responsive">
                                                <div class="chart" id="vendas" style="height: 300px;"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                <!-- Negociacao-->
                <div class="box box-success">
                    <div class="box-header">
                        <i class="fa fa-bar-chart-o"></i>
                        <h3 class="box-title">@Html.ActionLink("Resumo das negociações dos ultimos 30 dias", "Details", new { controller = "Negociacao", Id = Model.Num_CPF })</h3>
                        <div class="box-tools pull-right">
                            <button class="btn btn-default btn-sm" data-widget="collapse"><i class="fa fa-minus"></i></button>
                            <button class="btn btn-default btn-sm" data-widget="remove"><i class="fa fa-times"></i></button>
                        </div>
                    </div>
                    <div class="panel">
                        <div class="box-footer no-border">
                            <div class="row">
                                <div class="box-header">
                                    <div class="box-body">
                                        <div class="box-body chart-responsive">
                                            <div class="chart" id="negociacao" style="height: 300px;"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Atendimento-->
                <div class="box box-success">
                    <div class="box-header">
                        <i class="fa fa-bar-chart-o"></i>
                        <h3 class="box-title">@Html.ActionLink("Resumo dos atendimentos dos ultimos 30 dias", "Details", new { controller = "Atendimentos", Id = Model.Num_CPF })</h3>
                        <div class="box-tools pull-right">
                            <button class="btn btn-default btn-sm" data-widget="collapse"><i class="fa fa-minus"></i></button>
                            <button class="btn btn-default btn-sm" data-widget="remove"><i class="fa fa-times"></i></button>
                        </div>
                    </div>
                    <div class="panel">
                        <div class="box-footer no-border">
                            <div class="row">
                                <div class="box-header">
                                    <div class="box-body">
                                        <div class="box-body chart-responsive">
                                            <div class="chart" id="atendimento" style="height: 300px;"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


</section><!-- /.right col -->

</div>  
    </section>
    
</aside>
<hr />
<p>
    @Html.ActionLink("Edit", "Edit", new { id = Model.Num_CPF }) |
    @Html.ActionLink("Back to List", "Index")
</p>
<!-- /.right-side -->
@Scripts.Render("~/Scripts/AdminLTE/dashboard.js")
@Scripts.Render("~/Scripts/raphael-min.js")
@Scripts.Render("~/Scripts/plugins/morris/morris.min.js")
@Scripts.Render("~/Scripts/plugins/sparkline/jquery.sparkline.min.js")
@Scripts.Render("~/Scripts/plugins/jvectormap/jquery-jvectormap-1.2.2.min.js")
@Scripts.Render("~/Scripts/plugins/jvectormap/jquery-jvectormap-world-mill-en.js")
@Scripts.Render("~/Scripts/plugins/jqueryKnob/jquery.knob.js")
@Scripts.Render("~/Scripts/plugins/daterangepicker/daterangepicker.js")
@Scripts.Render("~/Scripts/plugins/datepicker/bootstrap-datepicker.js")
@Scripts.Render("~/Scripts/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js")
@Scripts.Render("~/Scripts/plugins/iCheck/icheck.min.js")

<script type="text/javascript">
    $(document).ready(function () {
        $("li").removeClass("active");
        $("#dashboard").addClass("active");
    });
</script>

<!--Vendas-->
<script type="text/javascript">
    $.ajax({
        url: '/api/ApiIndicadorVendas/@Html.DisplayFor(model => model.Num_CPF).ToString().Replace(",00","")',
        type: 'GET',
        dataType: 'json',
        success: function (resp2) {
            Morris.Area({
                element: 'vendas',
                resize: true,
                data: resp2,
                lineColors: ['#00cc99', '#99ff66'],
                xkey: 'Data',
                ykeys: ['MinhasVendas', 'Equipe'],
                hideHover: 'auto',
                labels: ['Minhas Vendas', 'Vendas da Equipe'],
                behaveLikeLine: true,
                fillOpacity: 0.6,
                resize: true,
                pointFillColors: ['#ffffff'],
                pointStrokeColors: ['black'],
                gridTextSize: 9,
                parseTime: false
            });
        },
        error: function () {
            alert('Erro ao carregar o Google Chart');
        }
    });
</script>

<!--Negociacao-->
<script type="text/javascript">
    $.ajax({
        url: '/api/ApiIndicadorNegociacao/@Html.DisplayFor(model => model.Num_CPF).ToString().Replace(",00","")',
        type: 'GET',
        dataType: 'json',
        success: function (resp2) {
            Morris.Area({
                element: 'negociacao',
                resize: true,
                data: resp2,
                lineColors: ['#33cccc', '#99ccff'],
                xkey: 'Data',
                ykeys: ['MinhasVendas', 'Equipe'],
                hideHover: 'auto',
                labels: ['Minhas Negociações', 'Negociações da Equipe'],
                behaveLikeLine: true,
                fillOpacity: 0.6,
                resize: true,
                pointFillColors: ['#ffffff'],
                pointStrokeColors: ['black'],
                gridTextSize: 9,
                parseTime: false
            });
        },
        error: function () {
            alert('Erro ao carregar o Google Chart');
        }
    });
</script>

<!--Atendimento-->
<script type="text/javascript">
    $.ajax({
        url: '/api/ApiIndicadorAtendimento/@Html.DisplayFor(model => model.Num_CPF).ToString().Replace(",00","")',
        type: 'GET',
        dataType: 'json',
        success: function (resp2) {
            Morris.Area({
                element: 'atendimento',
                resize: true,
                data: resp2,
                lineColors: ['#cc66ff', '#ffcc99'],
                xkey: 'Data',
                ykeys: ['MinhasVendas', 'Equipe'],
                hideHover: 'auto',
                labels: ['Meus Atendimentos', 'Atendimentos da Equipe'],
                behaveLikeLine: true,
                fillOpacity: 0.6,
                resize: true,
                pointFillColors: ['#ffffff'],
                pointStrokeColors: ['black'],
                gridTextSize: 9,
                parseTime: false
            });
        },
        error: function () {
            alert('Erro ao carregar o Google Chart');
        }
    });
</script>


<!--Historico vendas-->
<script type="text/javascript">
    $.ajax({
        url: '/api/ApiIndicadorHistoricoVendas/@Html.DisplayFor(model => model.Num_CPF).ToString().Replace(",00","")',
        type: 'GET',
        dataType: 'json',
        success: function (resp2) {
            Morris.Bar({
                element: 'Historico-Vendas',
                resize: true,
                data: resp2,
                barColors: ['#0066ff', '#66ff33'],
                xkey: [ 'Mes'],
                ykeys: ['valorTotal', 'quantidadeTotal'],
                hideHover: 'auto',
                labels: ['Valor', 'Quantidade'],
                behaveLikeLine: true,
                fillOpacity: 0.6,
                resize: true,
                pointFillColors: ['#ffffff'],
                pointStrokeColors: ['white'],
                stacked: true,
                hideHover:true,
                series: {
                    bars: {
                        show: true,
                        barWidth: 0.5,
                        align: "center"
                    }
                },
                xaxis: {
                    mode: "categories",
                    tickLength: 0
                }
            });
        },
        error: function () {
            alert('Erro ao carregar o Google Chart');
        }
    });
</script>

<!--Ranking de vendas Valor-->
<script type="text/javascript">
    $.ajax({
        url: '/api/ApiIndicadorRankingVendas/@Html.DisplayFor(model => model.Num_CPF).ToString().Replace(",00","")' ,
        type: 'GET',
        dataType: 'json',
        success: function (resp2) {
            Morris.Bar({
                element: 'Ranking-Vendas',
                resize: true,
                data: resp2,
                barColors: ['#00CC00', '#ffff66'],
                xkey: 'vendedor',
                ykeys: ['valorTotal', 'quantidadeTotal'],             
                labels: ['Valor', 'Quantidade'],
                behaveLikeLine: true,
                fillOpacity: 0.6,
                pointFillColors: ['#ffffff'],
                pointStrokeColors: ['white'],
                stacked: false,
                hideHover: false,
                series: {
                    bars: {
                        show: true,
                        barWidth: 0.5,
                        align: "center"
                    }
                },
                xaxis: {
                    mode: "categories",
                    tickLength: 0
                }
            });
        }
       
    });
</script>


<!--Indicador Com plano-->
<script type="text/javascript">
    $.ajax({
        url: '/api/ApiIndicadorSituacaoEmpresaComPlano/@Html.DisplayFor(model => model.Num_CPF).ToString().Replace(",00","")',
        type: 'GET',
        dataType: 'json',
        success: function (resp) {
            Morris.Donut({
                data: resp,
                element: 'plano-chart',
                resize: true,
                hideHover: 'auto',
                colors: ['#04B431', '#5882FA', '#FFFF00']
            });
        },
        error: function () {
            alert('Erro ao carregar o Google Chart');
        }
    });
</script>

<!--Indicador Sem plano-->
<script type="text/javascript">
    $.ajax({
        url: '/api/ApiIndicadorSituacaoEmpresaSemPlano/@Html.DisplayFor(model => model.Num_CPF).ToString().Replace(",00","")',
        type: 'GET',
        dataType: 'json',
        success: function (resp) {
            Morris.Donut({
                data: resp,
                element: 'semplano-chart',
                resize: true,
                hideHover: 'auto',
                colors: ['#FFBF00', '#F3F781', '#FE2E2E']
            });
        },
        error: function () {
            alert('Erro ao carregar o Google Chart');
        }
    });
</script>