 <!-- Right side column. Contains the navbar and content of the page -->
<aside class="right-side">
    <!-- Content Header (Page header) -->
    <section class="content-header">
        <h1>
            Dashboard
            <small>Painel de controle</small>
        </h1>
        <ol class="breadcrumb">
            <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
            <li class="active">Dashboard</li>
        </ol>
    </section>
    <!-- Main content -->
    <section class="content">
        <!-- Small boxes (Stat box) -->
        <div class="row">
            <div class="col-lg-3 col-xs-6">
                <!-- small box -->
                <div class="small-box bg-aqua">
                    <div id="qtdNovosClientes2" class="inner">
                        <p>
                            Novos cadastros
                        </p>
                    </div>
                    <div class="icon">
                        <i class="ion ion-bag"></i>
                    </div>
                    <a href="~/NovoCadastro" class="small-box-footer">
                        Mais informações <i class="fa fa-arrow-circle-right"></i>
                    </a>
                </div>
            </div><!-- ./col -->
            <div class="col-lg-3 col-xs-6">
                <!-- small box -->
                <div class="small-box bg-green">
                    <div id="qtdclion2" class="inner">
                        <p>
                            Clientes online
                        </p>
                    </div>
                    <div class="icon">
                        <i class="ion ion-stats-bars"></i>
                    </div>
                    <a href="~/EmpresaOnline" class="small-box-footer">
                        Mais informações <i class="fa fa-arrow-circle-right"></i>
                    </a>
                </div>
            </div><!-- ./col -->
            <div class="col-lg-3 col-xs-6">
                <!-- small box -->
                <div class="small-box bg-yellow">
                    <div id="qtdcomplano2" class="inner">
                        <p>
                            Clientes com plano
                        </p>
                    </div>
                    <div class="icon">
                        <i class="ion ion-person-add"></i>
                    </div>
                    <a href="~/EmpresaComPlano" class="small-box-footer">
                        Mais informações <i class="fa fa-arrow-circle-right"></i>
                    </a>
                </div>
            </div><!-- ./col -->
            <div class="col-lg-3 col-xs-6">
                <!-- small box -->
                <div class="small-box bg-red">
                    <div id="qtdsemplano2" class="inner">
                        <p>
                            Clientes sem plano
                        </p>
                    </div>
                    <div class="icon">
                        <i class="ion ion-pie-graph"></i>
                    </div>
                    <a href="~/EmpresaSemPlano" class="small-box-footer">
                        Mais informações <i class="fa fa-arrow-circle-right"></i>
                    </a>
                </div>
            </div><!-- ./col -->
        </div><!-- /.row -->
        <!-- Main row -->
        <div class="row">
            <!-- Left col -->
            <section class="col-lg-7 connectedSortable">
                <!-- Custom tabs (Charts with tabs)-->
                <!-- solid sales graph -->
                <div class="box">
                    <div class="box-header">
                        <i class="fa fa-binoculars"></i>
                        <h3 class="box-title">Esforço venda</h3>
                        <div class="box-tools pull-right">
                            <button class="btn btn-default btn-sm" data-widget="collapse"><i class="fa fa-minus"></i></button>
                            <button class="btn btn-default btn-sm" data-widget="remove"><i class="fa fa-times"></i></button>
                        </div>
                    </div>
                    <div class="box-body">
                        <div  id="esforco-venda" style="height: 250px;"></div>
                    </div><!-- /.box-body -->
                    <div class="box-footer no-border">
                        <div id="percentuais" class="row">
                           
                            <div class="col-xs-4 text-center">
                                <div id="donut-chart-percentatendimentoatendimento" style="height: 200px;"></div>
                                <div class="knob-label"><br><small class="badge pull-10 bg-green">% conversão negociação</small></div>
                            </div>
                            <div class="col-xs-4 text-center" style="border-right: 1px solid #f4f4f4">
                                <div id="donut-chart-percentnegociacaovenda" style="height: 200px;"></div>
                                <div class="knob-label"><br><small class="badge pull-10 bg-green">% conversão vendas</small></div>
                            </div>
                            <div class="col-xs-4 text-center" style="border-right: 1px solid #f4f4f4">
                                <div id="donut-chart-percentvendapaga" style="height: 200px;"></div>
                                <div class="knob-label"><br><small class="badge pull-10 bg-green">% conversão pagamento</small></div>
                            </div>
                            
                        </div><!-- /.row -->
                    </div><!-- /.box-footer -->
                </div><!-- /.box --> 


                <!--esforço-venda-valor-->
                <div class="box box-success">
                    <div class="box-header">
                        <i class="fa fa-bar-chart-o"></i>
                        <h3 class="box-title">Esforço venda valor</h3>
                        <div class="box-tools pull-right">
                            <button class="btn btn-default btn-sm" data-widget="collapse"><i class="fa fa-minus"></i></button>
                            <button class="btn btn-default btn-sm" data-widget="remove"><i class="fa fa-times"></i></button>
                        </div>
                    </div>
                    <div class="panel">
                        <div class="box-footer no-border">
                            <div class="row">
                                <div class="box-header">
                                    <div class="box-body">
                                        <div class="box-body chart-responsive">
                                            <div class="chart" id="esforco-venda-valor" style="height: 300px;"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Vendas-->
                <div class="box box-success">
                    <div class="box-header">
                        <i class="fa fa-bar-chart-o"></i>
                        <h3 class="box-title">@Html.ActionLink("Resumo de vendas ultimos 30 dias", "Index", new { controller = "Vendas" })</h3>
                        <div class="box-tools pull-right">
                            <button class="btn btn-default btn-sm" data-widget="collapse"><i class="fa fa-minus"></i></button>
                            <button class="btn btn-default btn-sm" data-widget="remove"><i class="fa fa-times"></i></button>
                        </div>
                    </div>
                    <div class="panel">
                        <div class="box-footer no-border">
                            <div class="row">
                                <div class="box-header">
                                    <div class="box-body">
                                        <div class="box-body chart-responsive">
                                            <div class="chart" id="vendas" style="height: 300px;"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Negociacao-->
                <div class="box box-success">
                    <div class="box-header">
                        <i class="fa fa-bar-chart-o"></i>
                        <h3 class="box-title">@Html.ActionLink("Resumo das negociações dos ultimos 30 dias", "Index", new { controller = "Negociacao" })</h3>
                        <div class="box-tools pull-right">
                            <button class="btn btn-default btn-sm" data-widget="collapse"><i class="fa fa-minus"></i></button>
                            <button class="btn btn-default btn-sm" data-widget="remove"><i class="fa fa-times"></i></button>
                        </div>
                    </div>
                    <div class="panel">
                        <div class="box-footer no-border">
                            <div class="row">
                                <div class="box-header">
                                    <div class="box-body">
                                        <div class="box-body chart-responsive">
                                            <div class="chart" id="negociacao" style="height: 300px;"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Atendimento-->
                <div class="box box-success">
                    <div class="box-header">
                        <i class="fa fa-bar-chart-o"></i>
                        <h3 class="box-title">@Html.ActionLink("Resumo dos atendimentos dos ultimos 30 dias", "Index", new { controller = "Atendimentos" })</h3>
                        <div class="box-tools pull-right">
                            <button class="btn btn-default btn-sm" data-widget="collapse"><i class="fa fa-minus"></i></button>
                            <button class="btn btn-default btn-sm" data-widget="remove"><i class="fa fa-times"></i></button>
                        </div>
                    </div>
                    <div class="panel">
                        <div class="box-footer no-border">
                            <div class="row">
                                <div class="box-header">
                                    <div class="box-body">
                                        <div class="box-body chart-responsive">
                                            <div class="chart" id="atendimento" style="height: 300px;"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                
               
                

            </section><!-- /.Left col -->
            <!-- right col (We are only adding the ID to make the widgets sortable)-->
            <section class="col-lg-5 connectedSortable">

                <!-- Indicadores box -->
                <div class="box box-success box-group ">
                    <div class="box-header">
                        <i class="fa fa-pie-chart"></i>
                        <h3 class="box-title">Indicadores</h3>
                        <div class="box-tools pull-right">
                            <button class="btn btn-default btn-sm" data-widget="collapse"><i class="fa fa-minus"></i></button>
                            <button class="btn btn-default btn-sm" data-widget="remove"><i class="fa fa-times"></i></button>
                        </div>
                    </div>
                    <div id="crm" class="box-footer no-border chat">
                        <div class="box-footer no-border">
                            <div class="row">
                                <div class="col-xs-6 text-center" style="border-right: 1px solid #f4f4f4">
                                    <div id="qtdcomplano" class="knob-label"><b>@Html.ActionLink("Com plano", "../EmpresaComPlano/")</b></div>
                                    <div class="chart" id="plano-chart" style="height: 200px; position: relative;"></div>
                                </div>
                                <div class="col-xs-6 text-center" style="border-right: 1px solid #f4f4f4">
                                    <div id="qtdsemplano" class="knob-label"><b>@Html.ActionLink("Sem plano", "../EmpresaSemPlano/")</b></div>
                                    <div class="chart" id="semplano-chart" style="height: 200px; position: relative;"></div>
                                </div>
                            </div>
                        </div><!-- /.box-footer -->
                    </div><!-- /.chat -->
                </div><!-- /.box -->    
                <!-- Ranking Vendas-->
                <div class="box bg-primary">
                    <div class="box-header">
                        <i class="fa fa-trophy"></i>
                        <h3 class="box-title">Ranking Vendas</h3>
                        <div class="box-tools pull-right">
                            <button class="btn btn-default btn-sm" data-widget="collapse"><i class="fa fa-minus"></i></button>
                            <button class="btn btn-default btn-sm" data-widget="remove"><i class="fa fa-times"></i></button>
                        </div>
                    </div>
                    <div class="box-body">
                        <div id="Ranking-Vendas" style="height: 300px;"></div>
                    </div><!-- /.box-body-->
                </div>
                 
                <!-- Historico Vendas-->
                <div class="box box-primary">
                    <div class="box-header">
                        <i class="fa fa-bar-chart-o"></i>
                        <h3 class="box-title">Histórico de vendas</h3>
                        <div class="box-tools pull-right">
                            <button class="btn btn-default btn-sm" data-widget="collapse"><i class="fa fa-minus"></i></button>
                            <button class="btn btn-default btn-sm" data-widget="remove"><i class="fa fa-times"></i></button>
                        </div>
                    </div>
                    <div class="box-body">
                        <div id="Historico-Vendas" style="height: 300px;"></div>
                    </div><!-- /.box-body-->
                </div>
                
            
                

                

               
            </section><!-- right col -->
        </div><!-- /.row (main row) -->
    </section><!-- /.content -->
</aside><!-- /.right-side -->
@Scripts.Render("~/Scripts/AdminLTE/dashboard.js")
@Scripts.Render("~/Scripts/raphael-min.js")
@Scripts.Render("~/Scripts/plugins/morris/morris.min.js")
@Scripts.Render("~/Scripts/plugins/sparkline/jquery.sparkline.min.js")
@Scripts.Render("~/Scripts/plugins/jvectormap/jquery-jvectormap-1.2.2.min.js")
@Scripts.Render("~/Scripts/plugins/jvectormap/jquery-jvectormap-world-mill-en.js")
@Scripts.Render("~/Scripts/plugins/jqueryKnob/jquery.knob.js")
@Scripts.Render("~/Scripts/plugins/daterangepicker/daterangepicker.js")
@Scripts.Render("~/Scripts/plugins/datepicker/bootstrap-datepicker.js")
@Scripts.Render("~/Scripts/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js")
@Scripts.Render("~/Scripts/plugins/iCheck/icheck.min.js")

<script type="text/javascript">
    $(document).ready(function () {
        $("li").removeClass("active");
        $("#dashboard").addClass("active");
    });
</script>

 <!--qtdfinaldeprazo-->
<script type="text/javascript">
    urls = '/api/ApiVendedorQtds/' 


    $.ajax({
        url: urls,
        type: 'GET',
        contentType: "application/json; charset=utf-8",
        success: function (response) {
            preencheQtsHome(response); // calling method
        },
        
    }
    );
    function preencheQtsHome(dataValues) {
        //dashboard

        var qtdComPlanoDashboard = document.getElementById('qtdcomplano2');
        var htmlqtdComPlanDashboard = ' <h3>' + dataValues[0].qtdClientesComPlano + '</h3>';

        var qtdSemPlanoDashboard = document.getElementById('qtdsemplano2');
        var htmlqtdSemPlanDashboard = ' <h3>' + dataValues[0].qtdClientesSemPlano + '</h3>';

        var qtdCliOnDashboard = document.getElementById('qtdclion2');
        var htmlCliOnDashboard = ' <h3>' + dataValues[0].qtdClientesOnline + '</h3>';

        var qtdCliNovosDashboard = document.getElementById('qtdNovosClientes2');
        var htmlCliNovosDashboard = ' <h3>' + dataValues[0].qtdNovosClientes + '</h3>';

        qtdComPlanoDashboard.innerHTML += htmlqtdComPlanDashboard;
        qtdSemPlanoDashboard.innerHTML += htmlqtdSemPlanDashboard;
        qtdCliOnDashboard.innerHTML += htmlCliOnDashboard;
        qtdCliNovosDashboard.innerHTML += htmlCliNovosDashboard;
    }
</script>
<!--Ranking de vendas-->
<script type="text/javascript">
    $.ajax({
        url: '/api/ApiIndicadorRankingVendas',
        type: 'GET',
        dataType: 'json',
        success: function (resp2) {
            Morris.Bar({
                element: 'Ranking-Vendas',
                resize: true,
                data: resp2,
                barColors: ['#00CC00', '#ffff66'],
                xkey: 'vendedor',
                ykeys: ['valorTotal', 'quantidadeTotal'],
                hideHover: 'auto',
                labels: ['Valor', 'Quantidade'],
                behaveLikeLine: true,
                fillOpacity: 0.6,
                resize: true,
                pointFillColors: ['#ffffff'],
                pointStrokeColors: ['white'],
                stacked: true,
                hideHover: true,
                series: {
                    bars: {
                        show: true,
                        barWidth: 0.5,
                        align: "center"
                    }
                },
                xaxis: {
                    mode: "categories",
                    tickLength: 0
                }
            });
        },
       
    });
</script>
<!--Indicador Com plano-->
<script type="text/javascript">
    $.ajax({
        url: '/api/ApiIndicadorSituacaoEmpresaComPlano',
        type: 'GET',
        dataType: 'json',
        success: function (resp) {
            Morris.Donut({
                data: resp,
                element: 'plano-chart',
                resize: true,
                hideHover: 'auto',
                colors: ['#04B431', '#5882FA', '#FFFF00']
            });
        },
       
    });
</script>

<!--Indicador Sem plano-->
<script type="text/javascript">
    $.ajax({
        url: '/api/ApiIndicadorSituacaoEmpresaSemPlano',
        type: 'GET',
        dataType: 'json',
        success: function (resp) {
            Morris.Donut({
                data: resp,
                element: 'semplano-chart',
                resize: true,
                hideHover: 'auto',
                colors: ['#FFBF00', '#F3F781', '#FE2E2E']
            });
        },
        
    });
</script>


<!--esforço-venda-->
<script type="text/javascript">
    $.ajax({
        url: '/api/ApiIndicadorEsforcoVenda/',
        type: 'GET',
        dataType: 'json',
        success: function (resp2) {
            Morris.Bar({
                element: 'esforco-venda',
                resize: true,
                data: resp2,
                barColors: ['#FFBF00', '#66ff33', '#0066ff', '#CC2EFA'],
                xkey: 'Vendedor',
                ykeys: ['Quantidade_Atendimento', 'Quantidade_Negociacao', 'quantidadevenda', 'QtdPago'],
                hideHover: 'auto',
                labels: ['Qtd Atendimento', 'Qtd Negociação', 'Qtd Venda', 'Qtd Pagamento'],
                hideHover: 'auto',
                stacked: true
            });
            var totalpagamento = 0;
            var totalvenda = 0;
            var totalnegociacao = 0;
            var totalatendimento = 0;

            var percentualpagvenda = 0;
            var percentualvendanegociacao = 0;
            var percentualatendimentonegociacao = 0;


            for (var i = 0; i < resp2.length; i++) {
                totalpagamento += resp2[i].QtdPago;
                totalvenda += resp2[i].quantidadevenda;
                totalnegociacao += resp2[i].Quantidade_Negociacao;
                totalatendimento += resp2[i].Quantidade_Atendimento;
            }

            var percentualpagvenda = ((totalpagamento / totalvenda) * 100);
            var percentualvendanegociacao = ((totalvenda / totalnegociacao) * 100);
            var percentualatendimentonegociacao = ((totalnegociacao / totalatendimento) * 100);

          

            Morris.Donut({
                element: 'donut-chart-percentvendapaga',
                data: [
                  { label: "Pagamento efetivo", value: percentualpagvenda.toFixed(2) },
                  { label: "Vendas", value: (100 - percentualpagvenda).toFixed(2) }
                ],
                resize: true
            });
            Morris.Donut({
                element: 'donut-chart-percentnegociacaovenda',
                data: [
                  { label: "Venda efetiva", value: percentualvendanegociacao.toFixed(2) },
                  { label: "Negociações", value: (100 - percentualvendanegociacao).toFixed(2) }
                ],
                resize: true
            });
            Morris.Donut({
                element: 'donut-chart-percentatendimentoatendimento',
                data: [
                  { label: "Negociação efetiva", value: percentualatendimentonegociacao.toFixed(2) },
                  { label: "Atendimentos", value: (100 - percentualatendimentonegociacao).toFixed(2) }
                ],
                resize: true
            });
            
          
        }
    });
</script>

<!--esforco-venda-valor-->
<script type="text/javascript">
    $.ajax({
        url: '/api/ApiIndicadorEsforcoVenda/',
        type: 'GET',
        dataType: 'json',
        success: function (resp2) {
            Morris.Area({
                element: 'esforco-venda-valor',
                resize: true,
                data: resp2,
                lineColors: ['#CC2EFA', '#99ff66'],
                xkey: 'Vendedor',
                ykeys: ['valorVenda', 'TotalPago'],
                hideHover: 'auto',
                labels: ['Valor Vendido', 'Valor Recebido'],
                hideHover: 'auto',
                behaveLikeLine: true,
                fillOpacity: 0.6,
                resize: true,
                pointFillColors: ['#ffffff'],
                pointStrokeColors: ['black'],
                gridTextSize: 9,
                parseTime: false
            });
        }
    });
</script>


<!--Historico vendas-->
<script type="text/javascript">
    $.ajax({
        url: '/api/ApiIndicadorHistoricoVendas',
        type: 'GET',
        dataType: 'json',
        success: function (resp2) {
            Morris.Bar({
                element: 'Historico-Vendas',
                resize: true,
                data: resp2,
                barColors: ['#0066ff', '#66ff33'],
                xkey: ['Mes'],
                ykeys: ['valorTotal', 'quantidadeTotal'],
                hideHover: 'auto',
                labels: ['Valor', 'Quantidade'],
                behaveLikeLine: true,
                fillOpacity: 0.6,
                resize: true,
                pointFillColors: ['#ffffff'],
                pointStrokeColors: ['white'],
                stacked: true,
                hideHover: true,
                series: {
                    bars: {
                        show: true,
                        barWidth: 0.5,
                        align: "center"
                    }
                },
                xaxis: {
                    mode: "categories",
                    tickLength: 0
                }
            });
        },
        
    });
</script>
<!--Vendas-->
<script type="text/javascript">
    $.ajax({
        url: '/api/ApiIndicadorVendas/',
        type: 'GET',
        dataType: 'json',
        success: function (resp2) {
            Morris.Area({
                element: 'vendas',
                resize: true,
                data: resp2,
                lineColors: ['#00cc99', '#99ff66'],
                xkey: 'Data',
                ykeys: [ 'Equipe'],
                hideHover: 'auto',
                labels: [ 'Vendas da Equipe'],
                behaveLikeLine: true,
                fillOpacity: 0.6,
                resize: true,
                pointFillColors: ['#ffffff'],
                pointStrokeColors: ['black'],
                gridTextSize: 9,
                parseTime: false
            });
        },
        
    });
</script>

<!--Negociacao-->
<script type="text/javascript">
    $.ajax({
        url: '/api/ApiIndicadorNegociacao/',
        type: 'GET',
        dataType: 'json',
        success: function (resp2) {
            Morris.Area({
                element: 'negociacao',
                resize: true,
                data: resp2,
                lineColors: ['#33cccc', '#99ccff'],
                xkey: 'Data',
                ykeys: [ 'Equipe'],
                hideHover: 'auto',
                labels: [ 'Negociações da Equipe'],
                behaveLikeLine: true,
                fillOpacity: 0.6,
                resize: true,
                pointFillColors: ['#ffffff'],
                pointStrokeColors: ['black'],
                gridTextSize: 9,
                parseTime: false
            });
        },
       
    });
</script>

<!--Atendimento-->
<script type="text/javascript">
    $.ajax({
        url: '/api/ApiIndicadorAtendimento/',
        type: 'GET',
        dataType: 'json',
        success: function (resp2) {
            Morris.Area({
                element: 'atendimento',
                resize: true,
                data: resp2,
                lineColors: ['#cc66ff', '#ffcc99'],
                xkey: 'Data',
                ykeys: [ 'Equipe'],
                hideHover: 'auto',
                labels: [ 'Atendimentos da Equipe'],
                behaveLikeLine: true,
                fillOpacity: 0.6,
                resize: true,
                pointFillColors: ['#ffffff'],
                pointStrokeColors: ['black'],
                gridTextSize: 9,
                parseTime: false
            });
        },
        
    });
</script>